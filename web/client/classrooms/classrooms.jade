template(name="classroom")
  .container
    .row.clearfix
      .col-md-9.column.classroom-body

        ul.nav.nav-tabs.classroom-nav
          li.active
            a(data-toggle="tab", href="#CourseInfo") Info

          if course.video
            li
              a(data-toggle="tab", href="#Video") Video
          
          if course.dockerImage
            li
              a(data-toggle="tab", href="#Environment") Environment
          
          if course.slides
            li
              a(data-toggle="tab", href="#Slides") Slides

          if isInRole "admin" classroomAndId
            li
              a(data-toggle="tab", href="#Admin") Admin
          
          if isInRole "teacher" classroomAndId
            li
              a(data-toggle="tab", href="#Teacher") Teacher
          
          if isInRole "student" classroomAndId
            li
              a(data-toggle="tab", href="#Student") Student

          +minimisedChatroom


        .tab-content
          .tab-pane.fade.in.active#CourseInfo
            br 
            +courseImage courseDoc=course width="300px"
            h2 {{course.courseName}}
            p {{course.description}}

          if course.video
            .tab-pane.fade#Video
              video.video-js.vjs-oudefault-skin(id="vid",src="",controls,width="100%",height="700px",data-setup='{ "techOrder": ["youtube"], "src": "{{course.video}}" }')
                    
          if course.dockerImage
            .tab-pane.fade#Environment
              if needToSetEnvConfigs
                h2 Need to Set ENV Configs
                //- h2 {{classroomId}}
                +setEnvConfigsForm classroomId=classroomId
              else
              
                +classroomEnvIframe docker=docker

          
          if course.slides
            .tab-pane.fade#Slides
              iframe#slides(src="{{course.slides}}", width="100%", height="700px", scrolling="auto")

          if isInRole "admin" classroomAndId
            .tab-pane.fade#Admin
              h2 You are admin in this classroom
              h2 TODO: student list 
              h2 TODO: make student as teacher or admin
          
          if isInRole "teacher" classroomAndId
            .tab-pane.fade#Teacher
              h2 TODO: Boardcast Message
              h2 TODO: Student List
              h2 TODO: Realtime Exercise
          
          if isInRole "student" classroomAndId
            .tab-pane.fade#Student
              h2 TODO: Recieve Teacher's Boardcast
              h2 TODO: Help Btn

      +chatroom classroomId=classroomId

template(name="setEnvConfigsForm")
  if envConfigsSchema
    +quickForm id="setEnvConfigs" schema=envConfigsSchema type="method" meteormethod="setEnvConfigs" 

template(name="classroomEnvIframe")
  if iframePort
    +envIframe ip=iframeIp port=iframePort




template(name="envIframe")
  input.connectEnvBtn.btn.btn-default(value="Connect Environment Again")
  iframe#envIframe(src="http://{{ip}}:{{port}}",port="{{port}}",ip="{{ip}}", width="100%", height="550px", scrolling="yes")
